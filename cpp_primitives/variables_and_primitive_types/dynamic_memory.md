# Dynamic Memory

**静态内存**：保存局部`static`对象、类`static`数据成员以及任何定义在函数之外的变量

**栈内存**：用来保存定义在函数内的非`static`对象。

**堆内存**：保存动态分配的对象，即程序运行时分配的对象。

分配在静态内存和栈内存的对象由**编译器自动创建和销毁**。对于栈对象，仅在程序块运行时存在；对于`static`内存中的`static`对象在使用之前分配，程序结束时销毁。堆内存中的动态对象生命周期由**程序控制**。

**为什么要使用动态内存？**

+ 程序不知道自己需要多少对象
+ 程序不知道所需对象的精确类型
+ 程序需要多个对象间共享数据

`C++`定义两个运算符来分配和释放动态内存，即运算符`new`和`delete`。这两个运算符管理内存十分容易出错。

为了更安全的使用动态内存，`C++11`提供了两种**智能指针**类型管理动态对象；默认初始初始化的智能指针保存的是一个空指针；智能指针类似于常规指针，解引用一个智能指针返回它指向的对象；在条件判断中使用智能指针就是检测是否为空。

## `shared_ptr`

`shared_ptr`允许多个指针指向同一个对象；

```cpp
shared_ptr<string> sp; // 
```

`shared_ptr`的析构函数会递减它指向的对象引用计数器，如果引用计数器为0，`shared_ptr`的析构函数就会自动销毁对象，并释放它占用的内存。

## `unique_ptr`



## `weak_ptr`